<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 For Udviklere | Den Sundhedsøkonomiske Investeringsmodel</title>
  <meta name="description" content="5 For Udviklere | Den Sundhedsøkonomiske Investeringsmodel" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="5 For Udviklere | Den Sundhedsøkonomiske Investeringsmodel" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 For Udviklere | Den Sundhedsøkonomiske Investeringsmodel" />
  
  
  

<meta name="author" content="Serkan Korkmaz, VIVE Sund" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="applikationen.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="">Dokumentation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Dokumentation</a></li>
<li class="chapter" data-level="2" data-path="introduktion.html"><a href="introduktion.html"><i class="fa fa-check"></i><b>2</b> Introduktion</a></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#databaser"><i class="fa fa-check"></i><b>3.1</b> Databaser</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="applikationen.html"><a href="applikationen.html"><i class="fa fa-check"></i><b>4</b> Applikationen</a>
<ul>
<li class="chapter" data-level="4.1" data-path="applikationen.html"><a href="applikationen.html#model-1"><i class="fa fa-check"></i><b>4.1</b> Model 1</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="applikationen.html"><a href="applikationen.html#output"><i class="fa fa-check"></i><b>4.1.1</b> Output</a></li>
<li class="chapter" data-level="4.1.2" data-path="applikationen.html"><a href="applikationen.html#input"><i class="fa fa-check"></i><b>4.1.2</b> Input</a></li>
<li class="chapter" data-level="4.1.3" data-path="applikationen.html"><a href="applikationen.html#fortolkning"><i class="fa fa-check"></i><b>4.1.3</b> Fortolkning</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="for-udviklere.html"><a href="for-udviklere.html"><i class="fa fa-check"></i><b>5</b> For Udviklere</a>
<ul>
<li class="chapter" data-level="5.1" data-path="for-udviklere.html"><a href="for-udviklere.html#indlæsning-af-eget-data"><i class="fa fa-check"></i><b>5.1</b> Indlæsning af eget data</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="for-udviklere.html"><a href="for-udviklere.html#preload_data"><i class="fa fa-check"></i><b>5.1.1</b> preload_data</a></li>
<li class="chapter" data-level="5.1.2" data-path="for-udviklere.html"><a href="for-udviklere.html#navnekonventioner"><i class="fa fa-check"></i><b>5.1.2</b> Navnekonventioner</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="for-udviklere.html"><a href="for-udviklere.html#videreudvikling-af-modellen"><i class="fa fa-check"></i><b>5.2</b> Videreudvikling af Modellen</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Udgivet med Bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Den Sundhedsøkonomiske Investeringsmodel</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="for-udviklere" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> For Udviklere<a href="for-udviklere.html#for-udviklere" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Dette afsnit beskriver brugen af modellens funktioner, og dets videre udvikling. Alle funktioner kan modificeres efter behov, og det er muligt at uploade egen data og få modellen til at beregne derefter. Hvis det skønnes at diverse optimeringer gør modellen generelt bedre, er I velkomne til at lave en <code>pull-request</code> som vil blive reviewet af undertegnede.</p>
<p><code>preload_data</code> forventer at finde <code>data</code> i mappen <code>input/modelX</code> og indlæser dette some en <code>named list</code>. <code>data</code> skal være i <code>wide</code>-format.</p>
<div id="indlæsning-af-eget-data" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Indlæsning af eget data<a href="for-udviklere.html#indlæsning-af-eget-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For <code>model 1</code> og <code>model 2</code> er 3 typer variabler.</p>
<ol style="list-style-type: decimal">
<li>Tid (<code>model 1</code>)</li>
<li>Socioøkonomiske Variabler (<code>model 1</code> og <code>model 2</code>)</li>
<li>Outcomes (<code>model 1</code> og <code>model 2</code>)</li>
<li>Assignment (<code>model 1</code> og <code>model 2</code>)</li>
<li>Allocator (<code>model 1</code> og <code>model 2</code>)</li>
</ol>
<p>Alle <code>variabler</code> bør navngives efter brug og som <code>as.charcters</code> ved brug af <code>fcase</code> eller <code>case_when</code>. Dette vil sige at, eksempelvis, arbejdsmarkedsforhold bør navngives som <code>Arbejdsløs</code>, <code>Fleksjob</code> osv.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="for-udviklere.html#cb2-1" aria-hidden="true" tabindex="-1"></a>DT[</span>
<span id="cb2-2"><a href="for-udviklere.html#cb2-2" aria-hidden="true" tabindex="-1"></a>  ,</span>
<span id="cb2-3"><a href="for-udviklere.html#cb2-3" aria-hidden="true" tabindex="-1"></a>  arbejdsmarked <span class="sc">:</span><span class="er">=</span> <span class="fu">fcase</span>(</span>
<span id="cb2-4"><a href="for-udviklere.html#cb2-4" aria-hidden="true" tabindex="-1"></a>    tmp <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&#39;Fleksjob&#39;</span>,</span>
<span id="cb2-5"><a href="for-udviklere.html#cb2-5" aria-hidden="true" tabindex="-1"></a>    default, <span class="st">&#39;Aktiv i Arbejdsmarkedet&#39;</span></span>
<span id="cb2-6"><a href="for-udviklere.html#cb2-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-7"><a href="for-udviklere.html#cb2-7" aria-hidden="true" tabindex="-1"></a>  ,</span>
<span id="cb2-8"><a href="for-udviklere.html#cb2-8" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div>
<div id="preload_data" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> preload_data<a href="for-udviklere.html#preload_data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>data</code> bør følge struktur foroven, med mindre det er tiltænkt at skrive <code>preload_data()</code> og størstedelen af de afhængige <code>scripts</code> om. Hvis eget <code>data</code> fødes i modellen, med <code>variabler</code> forskellige fra de, der allerede er indarbejdet i modellerne, skal argumenterne i <code>preload_data()</code> skrives om derefter.</p>
<p>Hvis <code>data</code> inkluderer nye <code>variabler</code> som,</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="for-udviklere.html#cb3-1" aria-hidden="true" tabindex="-1"></a>DT[</span>
<span id="cb3-2"><a href="for-udviklere.html#cb3-2" aria-hidden="true" tabindex="-1"></a>  ,</span>
<span id="cb3-3"><a href="for-udviklere.html#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">:=</span><span class="st">`</span>(</span>
<span id="cb3-4"><a href="for-udviklere.html#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">statsborgerskab =</span> <span class="fu">fcase</span>(</span>
<span id="cb3-5"><a href="for-udviklere.html#cb3-5" aria-hidden="true" tabindex="-1"></a>      tmp <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&#39;Udenlandsk&#39;</span>,</span>
<span id="cb3-6"><a href="for-udviklere.html#cb3-6" aria-hidden="true" tabindex="-1"></a>      default, <span class="st">&#39;Dansk&#39;</span></span>
<span id="cb3-7"><a href="for-udviklere.html#cb3-7" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb3-8"><a href="for-udviklere.html#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">indkomst_gruppe =</span> <span class="fu">fcase</span>(</span>
<span id="cb3-9"><a href="for-udviklere.html#cb3-9" aria-hidden="true" tabindex="-1"></a>      indkomst <span class="sc">&gt;</span> <span class="dv">1000</span>, <span class="st">&#39;Høj&#39;</span>,</span>
<span id="cb3-10"><a href="for-udviklere.html#cb3-10" aria-hidden="true" tabindex="-1"></a>      indkomest <span class="sc">&gt;</span> <span class="dv">500</span> <span class="sc">&amp;</span> indkomst <span class="sc">&lt;</span> <span class="dv">1000</span>, <span class="st">&#39;Mellem&#39;</span>,</span>
<span id="cb3-11"><a href="for-udviklere.html#cb3-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">default =</span> <span class="st">&#39;Lav&#39;</span></span>
<span id="cb3-12"><a href="for-udviklere.html#cb3-12" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-13"><a href="for-udviklere.html#cb3-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-14"><a href="for-udviklere.html#cb3-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-15"><a href="for-udviklere.html#cb3-15" aria-hidden="true" tabindex="-1"></a>  ,</span>
<span id="cb3-16"><a href="for-udviklere.html#cb3-16" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div>
<p>Så skal argumentet <code>char_vector</code> i <code>preload_data()</code> skrives om til <code>char_vector = c(..., 'statsborgerskab', 'indkomst_gruppe')</code> hvor <code>...</code> repræsenterer andre eksisterende karakteristika der er at finde i <code>data</code>.</p>
<blockquote>
<p>Det er ikke nødvendigt at angive
hvilke outcome variabler der er, så længe alle
andre variabler er angivet.</p>
</blockquote>
</div>
<div id="navnekonventioner" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Navnekonventioner<a href="for-udviklere.html#navnekonventioner" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>Hvis disse ikke overholdes
kan modellen <strong>ikke</strong> køre.</p>
</blockquote>
<p><code>data</code> skal indeholde <code>assignment</code>, <code>allocator</code> og <code>year</code>. <code>assignment</code> og <code>allocator</code> fungerer som over- og undergrupperinger og skal angives som <code>character</code>. Hvis <code>assignment = c('A', 'B')</code> og <code>allocator = c('a', 'b')</code>, er disse altså <code>cross-joins</code> af hinanden.</p>
</div>
</div>
<div id="videreudvikling-af-modellen" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Videreudvikling af Modellen<a href="for-udviklere.html#videreudvikling-af-modellen" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Det er tilladt at videreudvikle på <code>modellen</code> såfremt det overholder <code>GPL 2</code> retningslinierne. Dette indebærer først og fremmest, at den videreudviklede <code>model</code> bliver lagt op som <code>open-source</code> på eksempelvis <code>Github</code> med rette henvisninger.</p>
<p>Alternativt kan <code>modellen</code> videreudvikles på i det eksisterende <code>repository</code> ved at lave en <code>pull request</code>. Det er dog forventet at udviklere bruger <code>data.table</code> og <code>plotly</code> som det primære værktøj til behandling af data og grafer. Hvis man ikke kan imødekomme dette, vil alle <code>pull requests</code> blive afvist uden videre begrundelse.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="applikationen.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
